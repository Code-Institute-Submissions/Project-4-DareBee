{% extends 'base.template.html' %} 
{% load cloudinary %}
{% load static %}

{% block title %}
    Details for {{exercise.title}}
{% endblock%} 

{% block content %}

<h1>{{exercise.title}}</h1>
{% cloudinary exercise.cover class="exercise-details-cover"%}

<div class="row">
  <div class="col-3">
    Type:
  </div>
  <div class="col">
    {{exercise.exercise_type}}
  </div>
</div>
<div class="row">
  <div class="col-3">
    Price:
  </div>
  <div class="col">
    {{exercise.price}}
  </div>
</div>
<div class="row">
  <div class="col-3">Description</div>
  <div class="col">{{exercise.description}}</div>
</div>

<h3>Reviews</h3>
{% if user.is_authenticated %}
<a class="btn btn-success mb-3" href="{% url 'create_exercise_review_route' exercise_id=exercise.id %}">Create Review</a>
{% endif %}
{% for r in exercise.exercisereview_set.all %}
<div class="card mb-3">
    <div class="card-header">
        <div class="review-wrapper mb-2"><strong>{{r.datetime}} by {{r.customer.username}}</strong></div>
        {% if r.customer == request.user %}
        <a class="btn btn-primary btn-sm" href="{% url 'update_exercise_review_route' exercisereview_id=r.id %}">Edit</a>
        <a class="btn btn-danger btn-sm" href="{% url 'delete_exercise_review_route' exercisereview_id=r.id %}">Delete</a>
        {%endif%}
    </div>
    <div class="card-body">
    <h5 class="review-title card-title">{{r.title}}</h5>
    <div class="card-text">
      {{r.content}}
    </div>
  </div>
</div>
{% endfor %} 
{% endblock%}